<!DOCTYPE html>

<html>
<head>
<meta charset="utf-8">
<style>
svg {
  font: 10px sans-serif;
}
.x.axis .domain {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}
</style>
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>

var margin = {top: 50, right: 50, bottom: 50, left: 50},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom,
    // padding between nodes
    padding = 2,
    maxRadius = 1000,
    //numberOfNodes = 50;

// Create random node data.


d3.json("dataElysee.json", function (data) {
  var dataset = data.items["item"];
  var cles = [];
  var nombreSujet = [];

     for (var i = 0; i < dataset.length; i++) {
                // la date de l'evenement
                cles.push(dataset[i]["date"])
                //nombreSujet.push(data.items["item"][i]["items"].item);
                nombreSujet.push(dataset[i]["items"].item);}
				
	         var jours = [];

            for (var k = 0; k < cles.length; k++) {
                // on recupere juste le jour qui change, vu que c'est tous du 10/2018)
                jours.push(cles[k].split("/")[0])
            }

            //differents sujets
            for (var i = 0; i < 8; i++) {
                if (i == 6) {
                    nbrSujet.push(1);
                }
                else {
                    nbrSujet.push(nombreSujet[i].length);

                }

            }


            for (var k = 8; k < 13; k++) {
                nbrSujet.push(1);
            }

            // pour trier

            function sortNumber(a, b) {
                return a - b;
            }


            // parseInt sur nbrSujet[]
            var temp = [];
            tempo = jours.map(function (item) {
                return parseInt(item, 10);
            });
            // sort jours
            tempo.sort(sortNumber);

            var result = [tempo, nbrSujet];

            var result = [tempo, nbrSujet];
            var res = tempo.map(function (d) { return d; });

            var res2 = { "jour": tempo, "nombreSujet": nbrSujet };

            dataY = nbrSujet.map(function (d) { return d / 10; })
            console.log(dataY);

 });

var x = d3.scale.linear()
  .domain([0, d3.max(dataY, function (d) { return d; })]);
  .range( [margin.left, width + margin.right ] );


  svg.selectAll("circle")
    .data(dataY)
    .enter().append("circle")
    .style("fill", function(d) { return d.color; })
    .attr("cx", function(d) { return d.x} )
    .attr("cy", function(d) { return d.y} )
    .attr("r", function(d) { return d.radius} );

  loading.remove();
}
// Use a timeout to allow the rest of the page to load first.
setTimeout(renderGraph, 10);

</script>
</body>
</html>